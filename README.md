# 高级定时闹钟 (AdvancedClock)

一个功能强大的 WPF 定时闹钟应用程序，支持多种循环模式、数据持久化和开机自动启动。

## ✨ 主要功能

### 1. 多种循环模式
- **不循环（一次性）**：闹钟触发一次后自动禁用
- **按天循环**：每天在设定的时间触发
- **按月循环**：每月在设定的日期和时间触发
- **按年循环**：每年在设定的月份、日期和时间触发

### 2. 数据持久化 🆕
- **自动保存**：闹钟数据自动保存到用户目录
- **数据位置**：`%AppData%\AdvancedClock\alarms.json`
- **实时保存**：添加、编辑、删除或修改闹钟时自动保存
- **自动加载**：程序启动时自动加载上次保存的闹钟数据
- **JSON格式**：使用易读的JSON格式存储数据

### 3. 开机自动启动 🆕
- **一键设置**：通过界面复选框轻松启用/禁用开机启动
- **注册表管理**：自动管理Windows启动项
- **状态同步**：启动时自动检测并显示当前开机启动状态

### 4. 强提醒与弱提醒 🆕
- **强提醒（全屏遮罩）**：闹钟触发时全屏灰色遮罩，必须点击关闭按钮才能继续操作
- **弱提醒（任务栏通知）**：闹钟触发时在任务栏显示气泡通知，不影响正常操作
- **灵活选择**：每个闹钟可独立设置提醒方式
- **视觉效果**：强提醒窗口带有精美的动画和图标

### 5. 用户友好界面
- **实时时钟**：显示当前日期和时间
- **闹钟列表**：清晰展示所有闹钟信息
- **快速操作**：添加、编辑、删除、测试闹钟
- **启用/禁用**：单击复选框即可启用或禁用闹钟
- **数据管理**：一键打开数据文件所在目录

## 🚀 使用方法

### 基本操作

1. **添加闹钟**
   - 点击"添加闹钟"按钮
   - 填写闹钟名称、时间、循环模式和消息
   - 选择是否启用"强提醒（全屏遮罩）"
   - 点击"确定"保存

2. **编辑闹钟**
   - 在列表中选择要编辑的闹钟
   - 点击"编辑闹钟"按钮
   - 修改信息后点击"确定"

3. **删除闹钟**
   - 在列表中选择要删除的闹钟
   - 点击"删除闹钟"按钮
   - 确认删除操作

4. **测试闹钟**
   - 在列表中选择要测试的闹钟
   - 点击"测试闹钟"按钮
   - 立即触发闹钟提醒

### 数据管理 🆕

1. **查看数据文件**
   - 点击"📁 查看数据文件"按钮
   - 自动打开数据文件所在目录
   - 数据文件：`alarms.json`

2. **数据备份**
   - 复制 `%AppData%\AdvancedClock\alarms.json` 文件
   - 保存到安全位置

3. **数据恢复**
   - 关闭程序
   - 将备份的 `alarms.json` 文件复制回原位置
   - 重新启动程序

### 开机启动设置 🆕

1. **启用开机启动**
   - 勾选界面底部的"开机自动启动"复选框
   - 程序会自动添加到Windows启动项

2. **禁用开机启动**
   - 取消勾选"开机自动启动"复选框
   - 程序会自动从Windows启动项中移除

## 📁 数据存储

### 存储位置
```
%AppData%\AdvancedClock\alarms.json
```

实际路径示例：
```
C:\Users\YourUsername\AppData\Roaming\AdvancedClock\alarms.json
```

### 数据格式
```json
[
  {
    "Id": "guid",
    "Name": "闹钟名称",
    "AlarmTime": "2025-12-03T08:00:00",
    "RepeatMode": "Daily",
    "IsEnabled": true,
    "Message": "闹钟消息",
    "IsStrongAlert": false
  }
]
```

## 🔧 技术特性

- **框架**：.NET 7.0 + WPF
- **架构**：MVVM模式
- **数据绑定**：ObservableCollection + INotifyPropertyChanged
- **序列化**：System.Text.Json
- **定时器**：DispatcherTimer（每秒检查）
- **注册表**：Microsoft.Win32.Registry

## 📝 注意事项

1. **权限要求**
   - 开机启动功能需要修改注册表权限
   - 通常情况下用户权限即可，无需管理员权限

2. **数据安全**
   - 数据文件存储在用户目录，不会丢失
   - 建议定期备份重要的闹钟数据

3. **时间精度**
   - 闹钟检查精度为1秒
   - 触发时间误差在1秒以内

4. **循环闹钟**
   - 循环闹钟触发后自动计算下次触发时间
   - 一次性闹钟触发后自动禁用

## 🎯 示例场景

### 场景1：每日工作提醒
- **名称**：工作开始提醒
- **时间**：每天 09:00:00
- **循环**：每天
- **消息**：开始新的一天工作！

### 场景2：月度账单提醒
- **名称**：信用卡还款
- **时间**：每月 25日 10:00:00
- **循环**：每月
- **消息**：记得还信用卡！

### 场景3：年度纪念日
- **名称**：结婚纪念日
- **时间**：每年 6月15日 09:00:00
- **循环**：每年
- **消息**：今天是结婚纪念日！

### 场景4：临时提醒
- **名称**：会议提醒
- **时间**：2025-12-03 14:30:00
- **循环**：不循环
- **消息**：30分钟后有重要会议！

### 场景5：重要事项强提醒 🆕
- **名称**：重要会议
- **时间**：2025-12-03 15:00:00
- **循环**：不循环
- **强提醒**：✅ 启用（全屏遮罩）
- **消息**：重要客户会议即将开始！
- **说明**：使用强提醒确保不会错过重要会议

### 场景6：日常事项弱提醒 🆕
- **名称**：喝水提醒
- **时间**：每天 10:00:00
- **循环**：每天
- **强提醒**：❌ 不启用（任务栏通知）
- **消息**：该喝水了，保持健康！
- **说明**：使用弱提醒不打断当前工作

## 🔄 更新日志

### v2.1 (2025-12-03) 🆕
- ✅ 新增强提醒功能（全屏遮罩）
- ✅ 新增弱提醒功能（任务栏通知）
- ✅ 每个闹钟可独立选择提醒方式
- ✅ 优化闹钟触发体验

### v2.0 (2025-12-03)
- ✅ 新增数据持久化功能
- ✅ 新增开机自动启动功能
- ✅ 新增查看数据文件功能
- ✅ 优化数据自动保存机制
- ✅ 改进用户界面布局

### v1.0
- ✅ 基础闹钟功能
- ✅ 多种循环模式
- ✅ 闹钟管理界面
- ✅ 实时时钟显示

## 最近更新

### 2025-12-03 新增强提醒和弱提醒功能
- ✅ 实现强提醒（全屏遮罩）功能
- ✅ 实现弱提醒（任务栏通知）功能
- ✅ 在编辑对话框中添加强提醒选项
- ✅ 强提醒窗口带有精美的UI设计和实时时钟显示
- ✅ 弱提醒使用Windows原生任务栏气泡通知

### 2025-12-03 修复编辑对话框布局问题
- ✅ 修复了编辑闹钟界面确认按钮看不到的问题
- ✅ 增加窗口高度从 450 到 550
- ✅ 允许窗口调整大小（最小高度 500，最小宽度 450）
- ✅ 优化说明信息区域的字体和间距
- ✅ 为按钮添加手型光标提升用户体验

### 2025-12-03 修复时间输入绑定问题
- ✅ 修复了 DateTime 只读属性双向绑定导致的异常
- ✅ 实现独立的时间输入验证逻辑
- ✅ 添加完整的输入验证（小时 0-23，分钟/秒 0-59）

## 📄 许可证

本项目仅供学习和个人使用。

## 🤝 贡献

欢迎提交问题和改进建议！

---

**享受使用高级定时闹钟！** ⏰