# 强提醒与弱提醒功能测试指南

## 功能概述

高级闹钟应用现在支持两种提醒方式：

### 🔴 强提醒（全屏遮罩）
- 闹钟触发时，整个屏幕被灰色半透明遮罩覆盖
- 中央显示精美的提醒卡片，包含：
  - 闹钟图标（红色时钟）
  - 闹钟名称
  - 实时时钟显示
  - 闹钟消息
  - 关闭按钮
- 用户必须点击"关闭闹钟"按钮才能继续操作
- 适用于重要事项，确保不会错过

### 🔵 弱提醒（任务栏通知）
- 闹钟触发时，在Windows任务栏右下角显示气泡通知
- 显示闹钟名称、消息和触发时间
- 不影响用户当前操作
- 5秒后自动消失
- 适用于日常提醒，不打断工作流程

## 测试步骤

### 测试1：强提醒功能

1. **创建强提醒闹钟**
   - 点击"添加闹钟"按钮
   - 填写以下信息：
     - 名称：`强提醒测试`
     - 时间：当前时间后1分钟
     - 循环模式：不循环
     - 消息：`这是一个强提醒测试！`
     - ✅ 勾选"强提醒（全屏遮罩）"
   - 点击"确定"保存

2. **等待闹钟触发**
   - 等待1分钟
   - 闹钟触发时，屏幕应该被灰色遮罩覆盖
   - 中央显示白色提醒卡片

3. **验证强提醒界面**
   - ✅ 检查是否显示闹钟名称："强提醒测试"
   - ✅ 检查是否显示实时时钟（每秒更新）
   - ✅ 检查是否显示消息："这是一个强提醒测试！"
   - ✅ 检查是否有红色的"关闭闹钟"按钮
   - ✅ 尝试点击遮罩区域，应该无法关闭

4. **关闭强提醒**
   - 点击"关闭闹钟"按钮
   - 遮罩应该消失，恢复正常界面

### 测试2：弱提醒功能

1. **创建弱提醒闹钟**
   - 点击"添加闹钟"按钮
   - 填写以下信息：
     - 名称：`弱提醒测试`
     - 时间：当前时间后1分钟
     - 循环模式：不循环
     - 消息：`这是一个弱提醒测试！`
     - ❌ 不勾选"强提醒（全屏遮罩）"
   - 点击"确定"保存

2. **等待闹钟触发**
   - 等待1分钟
   - 闹钟触发时，任务栏右下角应该弹出气泡通知

3. **验证弱提醒通知**
   - ✅ 检查通知标题："闹钟提醒 - 弱提醒测试"
   - ✅ 检查通知内容：包含消息和触发时间
   - ✅ 检查是否播放了提示音
   - ✅ 验证通知不影响当前操作

4. **通知消失**
   - 等待5秒，通知应该自动消失
   - 或者点击通知，主窗口应该激活

### 测试3：快速测试功能

使用"测试闹钟"按钮可以立即触发闹钟，无需等待：

1. **测试强提醒**
   - 创建一个启用"强提醒"的闹钟
   - 在列表中选中该闹钟
   - 点击"测试闹钟"按钮
   - 应该立即显示全屏遮罩

2. **测试弱提醒**
   - 创建一个不启用"强提醒"的闹钟
   - 在列表中选中该闹钟
   - 点击"测试闹钟"按钮
   - 应该立即显示任务栏通知

### 测试4：编辑提醒方式

1. **修改现有闹钟**
   - 选择一个现有闹钟
   - 点击"编辑闹钟"按钮
   - 切换"强提醒（全屏遮罩）"复选框状态
   - 点击"确定"保存

2. **验证修改生效**
   - 使用"测试闹钟"功能验证
   - 确认提醒方式已更改

### 测试5：数据持久化

1. **创建多个不同类型的闹钟**
   - 创建2个强提醒闹钟
   - 创建2个弱提醒闹钟

2. **关闭并重新打开程序**
   - 关闭应用程序
   - 重新启动应用程序

3. **验证数据保存**
   - ✅ 检查所有闹钟是否正确加载
   - ✅ 检查强提醒设置是否保留
   - ✅ 使用"测试闹钟"验证每个闹钟的提醒方式

## 预期结果

### 强提醒应该：
- ✅ 全屏灰色遮罩（半透明黑色背景）
- ✅ 中央白色卡片，带阴影效果
- ✅ 显示红色闹钟图标
- ✅ 实时更新的时钟显示
- ✅ 只能通过点击"关闭闹钟"按钮关闭
- ✅ 窗口始终在最前面（Topmost）
- ✅ 播放系统提示音

### 弱提醒应该：
- ✅ 任务栏气泡通知
- ✅ 显示闹钟名称和消息
- ✅ 显示触发时间
- ✅ 5秒后自动消失
- ✅ 不阻止用户操作
- ✅ 播放系统提示音
- ✅ 点击通知可激活主窗口

## 常见问题

### Q1: 任务栏通知不显示？
**A:** Windows 10/11 可能禁用了通知。解决方法：
1. 打开"设置" > "系统" > "通知"
2. 确保"通知"开关已打开
3. 找到应用程序并启用通知

### Q2: 强提醒窗口无法关闭？
**A:** 这是设计行为。必须点击"关闭闹钟"按钮才能关闭。如果按钮不可见，请检查窗口大小。

### Q3: 提示音不播放？
**A:** 检查系统音量设置，确保未静音。

### Q4: 强提醒设置没有保存？
**A:** 
1. 检查数据文件：`%AppData%\AdvancedClock\alarms.json`
2. 确认文件中的 `IsStrongAlert` 字段值
3. 如果问题持续，删除数据文件重新创建闹钟

## 使用建议

### 适合使用强提醒的场景：
- 🔴 重要会议提醒
- 🔴 关键任务截止时间
- 🔴 服药提醒
- 🔴 重要电话/视频会议
- 🔴 考试/面试提醒

### 适合使用弱提醒的场景：
- 🔵 喝水提醒
- 🔵 休息提醒
- 🔵 日常任务提醒
- 🔵 轻度重要的事项
- 🔵 背景信息提醒

## 技术细节

### 强提醒实现：
- 使用 WPF Window，`WindowStyle="None"`
- `WindowState="Maximized"` 全屏显示
- `AllowsTransparency="True"` 支持半透明
- `Background="#CC000000"` 80%透明度黑色
- `Topmost="True"` 始终在最前面
- `ShowInTaskbar="False"` 不显示在任务栏

### 弱提醒实现：
- 使用 `System.Windows.Forms.NotifyIcon`
- `ShowBalloonTip(5000)` 显示5秒
- `BalloonTipIcon = ToolTipIcon.Info` 信息图标
- 点击通知激活主窗口

## 反馈

如果发现任何问题或有改进建议，请记录以下信息：
- 操作系统版本
- 问题描述
- 重现步骤
- 预期行为 vs 实际行为
