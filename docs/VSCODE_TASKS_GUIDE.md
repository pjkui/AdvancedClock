# VS Code 任务配置指南

本文档介绍了 AdvancedClock 项目中配置的 VS Code 任务，帮助开发者更高效地进行开发工作。

## 📋 任务分类

### 🔨 构建任务

#### `build-debug` (默认构建任务)
- **功能**: 构建 Debug 版本
- **快捷键**: `Ctrl+Shift+P` → `Tasks: Run Build Task` 或 `Ctrl+Shift+B`
- **特点**: 静默输出，适合日常开发

#### `build-release`
- **功能**: 构建 Release 版本
- **特点**: 显示详细输出，用于发布准备

### 🧹 清理和还原任务

#### `clean`
- **功能**: 清理构建输出
- **用途**: 解决构建缓存问题

#### `restore`
- **功能**: 还原 NuGet 包
- **用途**: 更新依赖项

#### `clean-restore-build`
- **功能**: 组合任务 - 清理 → 还原 → 构建
- **用途**: 完全重新构建项目

### 🚀 运行任务

#### `run-app`
- **功能**: 运行 Debug 版本应用程序
- **特点**: 自动先构建，然后运行

#### `run-app-release`
- **功能**: 运行 Release 版本应用程序
- **特点**: 优化版本，性能更好

#### `quick-run`
- **功能**: 快速运行 - 构建并启动应用
- **用途**: 一键测试功能

### 📦 发布任务

#### `publish-debug`
- **功能**: 发布 Debug 版本到 `publish/Debug/`
- **特点**: 包含调试信息

#### `publish-release`
- **功能**: 发布 Release 版本到 `publish/Release/`
- **特点**: 优化版本，需要 .NET 8.0 运行时

#### `publish-standalone`
- **功能**: 发布独立可执行文件到 `publish/Standalone/`
- **特点**: 
  - 包含 .NET 8.0 运行时
  - 单文件发布（约 150MB）
  - 无需安装 .NET 即可运行
  - 适合分发给最终用户

### 🛠️ 开发工具任务

#### `watch`
- **功能**: 监视文件变化并自动重新运行
- **用途**: 开发时实时测试
- **特点**: 后台运行，文件变化时自动重启

#### `format-code`
- **功能**: 格式化代码
- **用途**: 保持代码风格一致

### 📊 项目信息任务

#### `show-info`
- **功能**: 显示 .NET 环境信息
- **用途**: 检查 SDK 版本和环境配置

#### `list-packages`
- **功能**: 列出项目依赖的 NuGet 包
- **用途**: 查看包版本和依赖关系

### ⚡ 快捷任务

#### `full-rebuild`
- **功能**: 完全重新构建 - 清理 → 还原 → 构建 Release
- **用途**: 解决复杂的构建问题

## 🎯 使用方法

### 方法一：命令面板
1. 按 `Ctrl+Shift+P` 打开命令面板
2. 输入 `Tasks: Run Task`
3. 选择要执行的任务

### 方法二：快捷键
- `Ctrl+Shift+B`: 运行默认构建任务 (`build-debug`)

### 方法三：终端菜单
1. 点击菜单栏 `Terminal` → `Run Task...`
2. 选择要执行的任务

## 📁 输出目录

| 任务类型 | 输出目录 | 说明 |
|---------|---------|------|
| Debug 构建 | `bin/Debug/net8.0-windows/` | 开发调试版本 |
| Release 构建 | `bin/Release/net8.0-windows/` | 发布优化版本 |
| Debug 发布 | `publish/Debug/` | 可部署的 Debug 版本 |
| Release 发布 | `publish/Release/` | 可部署的 Release 版本 |
| 独立发布 | `publish/Standalone/` | 包含运行时的独立版本 |

## 🔧 任务特性

### 依赖关系
- 运行任务会自动先执行构建
- 组合任务按顺序执行多个子任务

### 输出控制
- **Silent**: 构建任务静默输出，减少干扰
- **Shared**: 多个任务共享终端面板
- **New**: 每个任务使用新的终端面板

### 问题匹配器
- 自动识别编译错误和警告
- 在问题面板中显示错误位置
- 支持点击跳转到错误代码

## 💡 开发建议

### 日常开发流程
1. 使用 `build-debug` 进行快速构建
2. 使用 `run-app` 测试功能
3. 使用 `watch` 进行实时开发

### 发布流程
1. 使用 `full-rebuild` 确保干净构建
2. 使用 `publish-release` 创建发布版本
3. 使用 `publish-standalone` 创建独立可执行文件

### 问题排查
1. 构建失败时使用 `clean-restore-build`
2. 依赖问题时使用 `restore`
3. 环境问题时使用 `show-info`

## 🚨 注意事项

1. **独立发布**: `publish-standalone` 会生成较大的文件，但无需安装 .NET 运行时
2. **监视模式**: `watch` 任务会持续运行，使用 `Ctrl+C` 停止
3. **并发限制**: 某些任务限制了并发实例数，避免资源冲突
4. **路径依赖**: 所有任务都设置了正确的工作目录，确保路径解析正确

## 🔄 更新历史

- **v1.0**: 基础构建和运行任务
- **v2.0**: 添加发布和开发工具任务
- **v2.1**: 优化任务配置，添加组合任务和独立发布